<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Book</title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <%- include('partials/header') %>

    <main>
        <h1>Add New Book & Review</h1>
        <form action="/books" method="POST" class="add-book-form">
            <div class="form-row">
                <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" id="title" name="title" required>
                </div>

                <div class="form-group">
                    <label for="author">Author:</label>
                    <input type="text" id="author" name="author">
                </div>

                <div class="form-group">
                    <label for="isbn">ISBN:</label>
                    <input type="text" id="isbn" name="isbn" required oninput="updateCoverPreview()">
                </div>

            </div>

            <!-- Preview image -->
            <div class="form-row cover-column">
                <div class="cover-container">
                    <div class="form-group">
                        <img id="coverImage" src="/images/no-cover.jpg" alt="Cover preview" >
                        <!-- style="display: none;" -->
                    </div>
                </div>
            </div>

            <div class="form-review">
                <h2>Review</h2>
                <div class="form-group">
                    <label for="review_text">Review Text:</label>
                    <textarea  class="review-input" id="review_text" name="review_text" rows="10" required></textarea>
                </div>

                <div class="form-group">
                    <label for="stars">Rating:</label>
                    <div class="stars">
                        <input type="radio" id="star5" name="rating" value="5" />
                        <label for="star5" title="5 stars">&#9733;</label>
                        <input type="radio" id="star4" name="rating" value="4" />
                        <label for="star4" title="4 stars">&#9733;</label>
                        <input type="radio" id="star3" name="rating" value="3" />
                        <label for="star3" title="3 stars">&#9733;</label>
                        <input type="radio" id="star2" name="rating" value="2" />
                        <label for="star2" title="2 stars">&#9733;</label>
                        <input type="radio" id="star1" name="rating" value="1" />
                        <label for="star1" title="1 star">&#9733;</label>
                    </div>
                </div>

                <button type="submit" class="submit-button">Add Book and Review</button>
            </div>
        </form>

    </main>

    <%- include('partials/footer') %>

    <script>
        function updateCoverPreview() {
            const isbn = document.getElementById('isbn').value;
            const coverImage = document.getElementById('coverImage');
            if (isbn) {
                coverImage.src = `https://covers.openlibrary.org/b/ISBN/${isbn}-M.jpg`;
                coverImage.alt = `Cover image for ISBN ${isbn}`;
                coverImage.style.display = 'block'; // Show image if ISBN is present
            } else {
                coverImage.src = ''; // Hide image if no ISBN
                coverImage.style.display = 'none';
            }
        }
    </script>    
</body>
</html>