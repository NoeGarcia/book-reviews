<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Book</title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <%- include('partials/header') %>

    <main>
        <h1>Edit Book</h1>
        <form action="/books/<%= book.id %>?_method=PUT" method="POST" class="edit-book-form">
            <!-- To handle PUT request -->
            <input type="hidden" name="_method" value="PUT"> 
            
            <div class="form-group">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="<%= book.title %>" required>
            </div>

            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" id="author" name="author" value="<%= book.author %>">
            </div>

            <div class="form-group">
                <label for="cover_url">Cover URL:</label>
                <input type="text" id="cover_url" name="cover_url" value="<%= book.cover_url %>">
            </div>

            <h2>Review</h2>
            <div class="form-group">
                <label for="review_text">Review Text:</label>
                <textarea class="review-input" id="review_text" name="review_text" rows="10" required><%= review.review_text %></textarea>
            </div>

            <div class="form-group">
                <label for="stars">Rating:</label>
                <div class="stars">
                    <input type="radio" id="star5" name="rating" value="5" <% if (review.rating === 5) { %> checked <% } %> />
                    <label for="star5" title="5 stars">&#9733;</label>
                    <input type="radio" id="star4" name="rating" value="4" <% if (review.rating === 4) { %> checked <% } %> />
                    <label for="star4" title="4 stars">&#9733;</label>
                    <input type="radio" id="star3" name="rating" value="3" <% if (review.rating === 3) { %> checked <% } %> />
                    <label for="star3" title="3 stars">&#9733;</label>
                    <input type="radio" id="star2" name="rating" value="2" <% if (review.rating === 2) { %> checked <% } %> />
                    <label for="star2" title="2 stars">&#9733;</label>
                    <input type="radio" id="star1" name="rating" value="1" <% if (review.rating === 1) { %> checked <% } %> />
                    <label for="star1" title="1 star">&#9733;</label>
                </div>
            </div>
    
            <button type="submit" class="submit-button">Update Book and Review</button>
        </form>
    </main>

    <%- include('partials/footer') %>
</body>
</html>
